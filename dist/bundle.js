(()=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}var e={numMetaballs:100,minRadius:3,maxRadius:7.5,speed:10,color:"#ff0024",backgroundColor:"#121212",useDevicePixelRatio:!0,interactive:!1};function t(n){return Object.keys(e).reduce((function(t,r){return Object.assign(t,function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}({},r,void 0!==n[r]?n[r]:e[r]))}),{})}var r=function(n){if(!/^#[0-9A-F]{6,8}$/i.test(n))throw new Error("".concat(n," is not a valid hex color. Must be a 6 (8) character hex (+alpha) color."));var e=[n.slice(1,3),n.slice(3,5),n.slice(5,7),n.slice(7,9)].map((function(n){return Number.parseInt(n,"16")})).map((function(n){return n/255}));return Number.isFinite(e[3])||(e[3]=1),e};function o(n){var e=n.gl,t=n.options;function o(n,t){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Shader compile failed with: ".concat(e.getShaderInfoLog(r)));return r}var a=o("\nattribute vec2 position;\n\nvoid main() {\n    // position specifies only x and y.\n    // We set z to be 0.0, and w to be 1.0\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n",e.VERTEX_SHADER),i=t.numMetaballs+(t.interactive?1:0),c=r(t.color),l=r(t.backgroundColor);return{vertexShader:a,fragmentShader:o("\nprecision highp float;\nuniform vec2 windowSize;\nuniform vec3 metaballs[".concat(i,"];\n\nvoid main(){\n    // scaling from [0,100] to [0, canvasWidth/Height]\n    float radiusMultiplier = min(windowSize.x, windowSize.y) / 200.0;\n    float xMultiplier = windowSize.x / 100.0;\n    float yMultiplier = windowSize.y / 100.0;\n\n    float x = gl_FragCoord.x;\n    float y = gl_FragCoord.y;\n    float v = 0.0;\n    for (int i = 0; i < ").concat(i,"; i++) {\n        vec3 mb = metaballs[i];\n        float dx = abs((mb.x * xMultiplier) - x);\n        // width - dx is needed for the wrap-around-the-edges logic\n        dx = min(dx, windowSize.x - dx);\n        float dy = abs((mb.y * yMultiplier) - y);\n        // height - dy is needed for the wrap-around-the-edges logic\n        dy = min(dy, windowSize.y - dy);\n        float r = mb.z * radiusMultiplier;\n        v += r*r/(dx*dx + dy*dy);\n    }\n    if (v > 1.0) {\n        gl_FragColor = vec4(").concat(c.join(", "),");\n    } else {\n        gl_FragColor = vec4(").concat(l.join(", "),");\n    }\n}\n"),e.FRAGMENT_SHADER)}}function a(n){var e=n.gl,t=n.program,r=new Float32Array([-1,1,-1,-1,1,1,1,-1]),o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW);var a=function(n,t){var r=e.getAttribLocation(n,t);if(-1===r)throw new Error("Can not find attribute ".concat(t,"."));return r}(t,"position");e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,e.FALSE,8,0)}function i(n){var e=n.gl,t=n.program,r=n.name,o=e.getUniformLocation(t,r);if(-1===o)throw new Error("Can not find uniform ".concat(r,"."));return o}var c=function(n){var e=n.options;return Array.from({length:e.numMetaballs+(e.interactive?1:0)},(function(){var n=e.minRadius+Math.random()*(e.maxRadius-e.minRadius);return{x:Math.random()*(100-n/100)+n/200,y:Math.random()*(100-n/100)+n/200,vx:2*(Math.random()-.5)*e.speed/100,vy:2*(Math.random()-.5)*e.speed/100,r:n}}))},l=function(n){var e=n.metaballs;n.options.interactive&&(e=e.slice(0,-1)),e.forEach((function(n){n.x+=n.vx,n.x<0?n.x=100-n.x:n.x>100&&(n.x=n.x-100),n.y+=n.vy,n.y<0?n.y=100-n.y:n.y>100&&(n.y=n.y-100)}))},s=function(n){return i({gl:n.gl,program:n.program,name:"metaballs"})};function u(e){var t=e.options,r=e.gl,o=t.interactive;if(o&&!["window","canvas"].includes(o))throw new Error('options.interactive must be one of "false", "\'window\'", or "\'canvas\'". Provided "'.concat(o,'" (').concat(n(o),")."));var a={x:0,y:0},i=function(){return null},c=function(){return null};return o&&("window"===o?(i=function(n){a.x=n.clientX/r.canvas.clientWidth,a.y=n.clientY/r.canvas.clientHeight,a.x=100*a.x,a.y=100*(1-a.y)},window.addEventListener("mousemove",i),c=function(){return window.removeEventListener("mousemove",i)}):"canvas"===o&&(i=function(n){a.x=(n.offsetX||n.clientX)/r.canvas.clientWidth,a.y=(n.offsetY||n.clientY)/r.canvas.clientHeight,a.x=100*a.x,a.y=100*(1-a.y)},r.canvas.addEventListener("mousemove",i),c=function(){return r.canvas.removeEventListener("mousemove",i)})),{cursorPos:a,unsubscribe:c}}!function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t(e);if("string"==typeof n&&(n=document.querySelector(n)),!(n instanceof window.Element)||"canvas"!==n.tagName.toLowerCase())throw new Error('First argument of "initMetaballs" must be a valid canvas element or a selector to an existing canvas element.');var d=n.getContext("webgl"),f=o({gl:d,options:r}),v=f.vertexShader,m=f.fragmentShader,g=d.createProgram();d.attachShader(g,v),d.attachShader(g,m),d.linkProgram(g),d.useProgram(g),a({gl:d,program:g});var h=function(){var n=r.useDevicePixelRatio?window.devicePixelRatio:1,e=Math.floor(d.canvas.clientWidth*n),t=Math.floor(d.canvas.clientHeight*n);d.canvas.width===e&&d.canvas.height===t||(d.canvas.width=e,d.canvas.height=t,d.viewport(0,0,d.canvas.width,d.canvas.height))};h();var w=c({options:r}),y=s({gl:d,program:g}),b=i({gl:d,program:g,name:"windowSize"}),x=u({options:r,gl:d}),p=x.cursorPos,S=(x.unsubscribe,!0),R=function n(){var e=d.canvas.width,t=d.canvas.height;l({metaballs:w,options:r});var o=new Float32Array(3*w.length);if(w.forEach((function(n,e){var t=3*e;o[t+0]=n.x,o[t+1]=n.y,o[t+2]=n.r})),r.interactive){var a=3*(w.length-1);o[a+0]=p.x,o[a+1]=p.y,o[a+2]=r.maxRadius}d.uniform3fv(y,o),d.uniform2fv(b,Float32Array.from({length:2},(function(n,r){return 0===r?e:t}))),d.drawArrays(d.TRIANGLE_STRIP,0,4),S&&window.requestAnimationFrame(n)};R(),window.addEventListener("resize",h)}("#networkbg",{numMetaballs:100,minRadius:3,maxRadius:10,speed:1,color:"#c1c1c1",backgroundColor:"#ffffff",useDevicePixelRatio:!1,interactive:"window"})})();