<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script
    type="text/javascript"
    src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <link rel="stylesheet" href="./styles/landing-page.css">
    <title>Contagion</title>
</head>
<body>
    <div class="content">
        <div class="sidebar">
            <div class="sidetitle">
                <h1 class="rotate title">CONTAGION</h1>
            </div> 
            <img class="logoimg" src="./assets/logo.png" alt="Logo" width="100px" height="auto">
        </div>
        <div class="main-content">
           <canvas class="networkbg" id="canvas-1"></canvas>
           <div class="mynetwork" id="mynetwork"></div>
        </div>
    </div>
    <script src="../dist/bundle.js"></script>
    <script type="text/paperscript" canvas="canvas-1" >
        project.currentStyle = {
            fillColor: 'white'
        };
        var ballPositions = [];
        
        
        function getVector(radians, length) {
            return new Point({
                // Convert radians to degrees:
                angle: radians * 180 / Math.PI,
                length: length
            });
        }

        function metaball(ball1, ball2, v, handle_len_rate, maxDistance) {
            var center1 = ball1.position;
            var center2 = ball2.position;
            var radius1 = ball1.bounds.width / 2;
            var radius2 = ball2.bounds.width / 2;
            var pi2 = Math.PI / 2;
            var d = center1.getDistance(center2);
            var u1, u2;

            if (radius1 == 0 || radius2 == 0)
                return;

            if (d > maxDistance || d <= Math.abs(radius1 - radius2)) {
                return;
            } else if (d < radius1 + radius2) { // case circles are overlapping
                u1 = Math.acos((radius1 * radius1 + d * d - radius2 * radius2) /
                        (2 * radius1 * d));
                u2 = Math.acos((radius2 * radius2 + d * d - radius1 * radius1) /
                        (2 * radius2 * d));
            } else {
                u1 = 0;
                u2 = 0;
            }

            var angle1 = (center2 - center1).getAngleInRadians();
            var angle2 = Math.acos((radius1 - radius2) / d);
            var angle1a = angle1 + u1 + (angle2 - u1) * v;
            var angle1b = angle1 - u1 - (angle2 - u1) * v;
            var angle2a = angle1 + Math.PI - u2 - (Math.PI - u2 - angle2) * v;
            var angle2b = angle1 - Math.PI + u2 + (Math.PI - u2 - angle2) * v;
            var p1a = center1 + getVector(angle1a, radius1);
            var p1b = center1 + getVector(angle1b, radius1);
            var p2a = center2 + getVector(angle2a, radius2);
            var p2b = center2 + getVector(angle2b, radius2);

            // define handle length by the distance between
            // both ends of the curve to draw
            var totalRadius = (radius1 + radius2);
            var d2 = Math.min(v * handle_len_rate, (p1a - p2a).length / totalRadius);

            // case circles are overlapping:
            d2 *= Math.min(1, d * 2 / (radius1 + radius2));

            radius1 *= d2;
            radius2 *= d2;

            var path = new Path({
                segments: [p1a, p2a, p2b, p1b],
                style: ball1.style,
                closed: true
            });
            var segments = path.segments;
            segments[0].handleOut = getVector(angle1a - pi2, radius1);
            segments[1].handleIn = getVector(angle2a + pi2, radius2);
            segments[2].handleOut = getVector(angle2b - pi2, radius2);
            segments[3].handleIn = getVector(angle1b + pi2, radius1);
            return path;
        }


        var handle_len_rate = 2.4;
        var circlePaths = [];
        var radius = 50;

        
        
        
        var connections = new Group();
        
        function generateConnections(paths) {
            // Remove the last connection paths:
            connections.children = [];
            for (var i = 0, l = paths.length; i < l; i++) {
                for (var j = i - 1; j >= 0; j--) {
                    var path = metaball(paths[i], paths[j], 0.5, handle_len_rate, 300);
                    if (path) {
                        connections.appendTop(path);
                        path.removeOnMove();
                    }
                }
            }
            console.log(connections)
        }


        
        



        //red = #d62b2b
        //blue = #3e6cda
        //gray = #2d2d2d
        //dark gray = #31131f


        // const metaoptions = {
        //     numMetaballs: 100,
        //     minRadius: 3,
        //     maxRadius: 7.5,
        //     speed: 10.0,
        //     color: '#ff0024',
        //     backgroundColor: '#121212',
        //     useDevicePixelRatio: true
        //   }
        
        // const cssSelector = '#networkbg'
        // initMetaballs(cssSelector, metaoptions)



        function createPopup(n){
            const popup = document.createElement("div")
            popup.style.border = "2px solid #31131f;"
            popup.style.width = "300px"
            popup.style.height = "300px"
            popup.style.backgroundImage = `url('./assets/${n}.png')`;
            popup.style.backgroundSize = "contain"
            popup.style.padding = "0px";
            return popup
        }

        const card = document.createElement("div");
        card.style = "width:50px; height:50px; border:2px solid #333;"


        var nodes = new vis.DataSet([
           
            { id: 8,  shape:"circle", group: 1, title:(createPopup(1)), borderWidth: 0,  font:  { size: 100, color:"#fff" }, color: {border: "#d62b2b", background: "#d62b2b", hover: { background: "#d62b2b",}, highlight: { background: "#d62b2b", }}, hidden:false, size:100, padding:20, /*image: "assets/2.png", */ label: "  " /*label: "2020 Vision"*/},
            { id: 9,  shape:"circle", group: 1, title:(createPopup(2)), borderWidth: 0,  font:  { size: 70,  color:"#fff" }, color: {border: "#d62b2b", background: "#d62b2b", hover: { background: "#d62b2b",}, highlight: { background: "#d62b2b", }}, hidden:false, size:100, padding:20, /*image: "assets/9.png", */ label: "  " /*label: "Covid-19 Indoor Safety Toop"*/},
            { id: 10, shape:"circle", group: 2, title:(createPopup(3)), borderWidth: 0,  font:  { size: 80,  color:"#fff" }, color: {border: "#d62b2b", background: "#d62b2b", hover: { background: "#d62b2b",}, highlight: { background: "#d62b2b", }}, hidden:false, size:100, padding:20, /*image: "assets/11.png",*/ label: "  " /*label: "Mapping Cholera"*/},
            { id: 11, shape:"circle", group: 2, title:(createPopup(4)), borderWidth: 0,  font:  { size: 65, color:"#fff" }, color: {border: "#d62b2b", background: "#d62b2b", hover: { background: "#d62b2b",}, highlight: { background: "#d62b2b", }}, hidden:false, size:100, padding:20, /*image: "assets/5.png", */ label: "  " /*label: "Theriak Disease Map"*/},
            { id: 12, shape:"circle", group: 3, title:(createPopup(5)), borderWidth: 0,  font:  { size: 85,  color:"#fff" }, color: {border: "#d62b2b", background: "#d62b2b", hover: { background: "#d62b2b",}, highlight: { background: "#d62b2b", }}, hidden:false, size:100, padding:20, /*image: "assets/8.png", */ label: "  " /*label: "A Cluster of 17 Cases"*/},
            { id: 13, shape:"circle", group: 1, title:(createPopup(6)), borderWidth: 0,  font:  { size: 70, color:"#fff" }, color: {border: "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/4.png", */ label: "  " /*label: "When the World Was A Laugh"*/},
            { id: 14, shape:"circle", group: 1, title:(createPopup(7)), borderWidth: 0,  font:  { size: 80,  color:"#fff" }, color: {border: "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/12.png",*/ label: "  " /*label: "Chameleon Project"*/},
            { id: 15, shape:"circle", group: 1, title:(createPopup(8)), borderWidth: 0,  font:  { size: 90,  color:"#fff" }, color: {border: "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/7.png", */ label: "  " /*label: "The Glassroom: Misinformation Edition"*/},
            { id: 16, shape:"circle", group: 2, title:(createPopup(9)), borderWidth: 0,  font:  { size: 70,  color:"#fff" }, color: {border: "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/10.png",*/ label: "  " /*label: "Malware Museum"*/},
            { id: 17, shape:"circle", group: 3, title:(createPopup(10)), borderWidth: 0,  font: { size: 65,  color:"#fff" }, color: {border: "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/15.png",*/ label: "  " /*label: "Robert Koch Cholera Map"*/},
            { id: 18, shape:"circle", group: 3, title:(createPopup(11)), borderWidth: 0,  font: { size: 100, color:"#fff" }, color: {border:  "#3e6cda", background: "#3e6cda", hover: { background: "#3e6cda",}, highlight: { background: "#3e6cda", }}, hidden:false, size:100, padding:20, /*image: "assets/16.png",*/ label: "  " /*label: "Crystallizing Viral History"*/},
            { id: 19, shape:"circle", group: 1, title:(createPopup(12)), borderWidth: 0,  font: { size: 80,  color:"#fff" }, color: {border: "#0f0400", background: "#0f0400", hover: { background: "#0f0400",}, highlight: { background: "#0f0400", }}, hidden:false, size:100, padding:20, /*image: "assets/13.png",*/ label: "  " /*label: "Fluid Dialogues"*/},
            { id: 20, shape:"circle", group: 1, title:(createPopup(13)), borderWidth: 0,  font: { size: 70,  color:"#fff" }, color: {border: "#0f0400", background: "#0f0400", hover: { background: "#0f0400",}, highlight: { background: "#0f0400", }}, hidden:false, size:100, padding:20, /*image: "assets/3.png", */ label: "  " /*label: "Drawing the Bombay Plague"*/},
            { id: 21, shape:"circle", group: 2, title:(createPopup(14)), borderWidth: 0,  font: { size: 90,  color:"#fff" }, color: {border: "#0f0400", background: "#0f0400", hover: { background: "#0f0400",}, highlight: { background: "#0f0400", }}, hidden:false, size:100, padding:20, /*image: "assets/14.png",*/ label: "  " /*label: "Alexander Fleming"*/},
            { id: 22, shape:"circle", group: 2, title:(createPopup(15)), borderWidth: 0,  font: { size: 80,  color:"#fff" }, color: {border: "#0f0400", background: "#0f0400", hover: { background: "#0f0400",}, highlight: { background: "#0f0400", }}, hidden:false, size:100, padding:20, /*image: "assets/1.png", */ label: "  " /*label: "Controlling the Plague in British India"*/},
            { id: 23, shape:"circle", group: 3, title:(createPopup(16)), borderWidth: 0,  font: { size: 85,  color:"#fff" }, color: {border: "#0f0400", background: "#0f0400", hover: { background: "#0f0400",}, highlight: { background: "#0f0400", }}, hidden:false, size:100, padding:20, /*image: "assets/6.png", */ label: "  " /*label: "Ants and Antimicrobial Resistance"*/},

            { id: 1, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Mapping" },
            { id: 2, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Documenting"},
            { id: 3, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Transmission"},
            { id: 4, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Source"},
            { id: 5, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "History"},
            { id: 6, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Experimenting"},
            { id: 7, shape:"text", margin:40, group: 0, font: { size: 36, color:"#fff" }, hidden:true,  label: "Consequences"},

        ]);
        var opac = 0;
        var exhibitlength = 400;
        // create an array with edges
        var edges = new vis.DataSet([
            { from: 8, to: 3,   length:exhibitlength, color: {opacity: opac} },
            { from: 8, to: 1,   length:exhibitlength, color: {opacity: opac} },
            
            { from: 9, to: 1,   length:exhibitlength, color: {opacity: opac} },
            { from: 9, to: 3,   length:exhibitlength, color: {opacity: opac} },
            
            { from: 10, to: 1 , length:exhibitlength, color:{opacity:opac}},
            { from: 11, to: 1 , length:exhibitlength, color:{opacity:opac}},
            { from: 10, to: 4 , length:exhibitlength, color:{opacity:opac}},
            { from: 11, to: 4 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 12, to: 3 , length:exhibitlength, color:{opacity:opac}},
            { from: 13, to: 3 , length:exhibitlength, color:{opacity:opac}},
            { from: 14, to: 3 , length:exhibitlength, color:{opacity:opac}},
            { from: 12, to: 2 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 13, to: 2 , length:exhibitlength, color:{opacity:opac}},
            { from: 14, to: 2 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 15, to: 2 , length:exhibitlength, color:{opacity:opac}},
            { from: 16, to: 2 , length:exhibitlength, color:{opacity:opac}},
            { from: 15, to: 4 , length:exhibitlength, color:{opacity:opac}},
            { from: 16, to: 4 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 17, to: 5 , length:exhibitlength, color:{opacity:opac}},
            { from: 18, to: 5 , length:exhibitlength, color:{opacity:opac}},
            { from: 17, to: 4 , length:exhibitlength, color:{opacity:opac}},
            { from: 18, to: 4 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 20, to: 5 , length:exhibitlength, color:{opacity:opac}},
            { from: 21, to: 5 , length:exhibitlength, color:{opacity:opac}},
            { from: 22, to: 5 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 20, to: 7 , length:exhibitlength, color:{opacity:opac}},
            { from: 21, to: 7 , length:exhibitlength, color:{opacity:opac}},
            { from: 22, to: 7 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 23, to: 6 , length:exhibitlength, color:{opacity:opac}},
            { from: 23, to: 7 , length:exhibitlength, color:{opacity:opac}},
            
            { from: 19, to: 2 , length:exhibitlength, color:{opacity:opac}},
            { from: 19, to: 7 , length:exhibitlength, color:{opacity:opac}},

            {from: 1, to: 2, length:1000, color:{opacity:opac}},
            {from: 2, to: 3, length:1000, color:{opacity:opac}},
            {from: 3, to: 4, length:1000, color:{opacity:opac}},
            {from: 4, to: 5, length:1000, color:{opacity:opac}},
            {from: 5, to: 6, length:1000, color:{opacity:opac}},
            {from: 6, to: 7, length:1000, color:{opacity:opac}},
            {from: 7, to: 1, length:1000, color:{opacity:opac}},
        ]);

        var newEdges = new vis.DataSet([
            {from: 8, to: 9,   length:110, color:{opacity:opac}},
            {from: 9, to: 13,  length:110, color:{opacity:opac}},
            {from: 13, to: 14, length:110, color:{opacity:opac}},
            {from: 14, to: 15, length:110, color:{opacity:opac}},
            {from: 15, to: 19, length:110, color:{opacity:opac}},
            {from: 19, to: 20, length:110, color:{opacity:opac}},
            {from: 20, to: 8,  length:110, color:{opacity:opac}},
            {from: 20, to: 9,  length:10, color:{opacity:opac}},
            {from: 14, to: 19,  length:10, color:{opacity:opac}},


            {from: 10, to: 11, length:150, color:{opacity:opac}},
            {from: 11, to: 16, length:150, color:{opacity:opac}},
            {from: 16, to: 21, length:150, color:{opacity:opac}},
            {from: 21, to: 22, length:150, color:{opacity:opac}},
            {from: 22, to: 10, length:150, color:{opacity:opac}},
            {from: 11, to: 21, length:10, color:{opacity:opac}},

            
            {from: 12, to: 17, length:150, color:{opacity:opac}},
            {from: 17, to: 18, length:150, color:{opacity:opac}},
            {from: 18, to: 23, length:150, color:{opacity:opac}},
            {from: 23, to: 12, length:150, color:{opacity:opac}},
            {from: 17, to: 23, length:30, color:{opacity:opac}},

            
            //connections between different bigger blobs
            {from: 13, to: 10,  length:550, color:{opacity:opac}},
            {from: 11, to: 12, length:550, color:{opacity:opac}},
            {from: 23, to: 13, length:550, color:{opacity:opac}},
            



        ]);

        // create a network



        var container = document.getElementById("mynetwork");
        var data = {
            nodes: nodes,
            edges: newEdges,
            
        };
        var options = {
            layout:{
                // randomSeed:2
            },
            nodes:{
                shapeProperties: {
                    useBorderWithImage: true,
                },
            },
            interaction: { hover: true },
             //physics: {
             //    barnesHut: {
             //      theta:0.3,
             //      centralGravity:0,
             //      gravitaionalConstant: -3000,
             //      nodeDistance: 200,
             //      damping: 0,
             //      avoidOverlap: 0,
             //      springLength: 10,
             //      springConstant: 0.05
             //    },
             //    maxVelocity: 0.03,
             //    minVelocity: 0.01,
             //    solver: "repulsion"
             //  }

            // physics: {
            //     barnesHut: {
            //       theta: 0.1,
            //       gravitationalConstant: -3000,
            //       springConstant: 0.1,
            //       damping: 0.3,
            //       springLength: 200,
            //       avoidOverlap: 0
            //     },
            //     maxVelocity: 0.015,
            //     minVelocity: 0,
            //     solver: "repulsion"
            // },
            physics: {
                "repulsion": {
                centralGravity: 0.001,
                springLength: 195,
                springConstant: 0.075,
                nodeDistance: 100,
                damping: 0.001,
                },
                maxVelocity: 1,
                minVelocity: 0.001,
                solver: "repulsion"
            }


        
        };
        var network = new vis.Network(container, data, options);

        // var ballPositions = [[255, 129], [610, 73], [486, 363],
        //         [117, 459], [484, 726], [843, 306], [789, 615], [1049, 82],
        //         [1292, 428], [1117, 733], [1352, 86], [92, 798]];





        function hideNodes(){

            nodes.update({id: 1, hidden: true});
            nodes.update({id: 2, hidden: true});
            nodes.update({id: 3, hidden: true});
            nodes.update({id: 4, hidden: true});
            nodes.update({id: 5, hidden: true});
            nodes.update({id: 6, hidden: true});
            nodes.update({id: 7, hidden: true});
            
        }

        function showStuff(x){
            switch(x){
                case 8: 
                    nodes.update({id: 1, hidden: false});
                    nodes.update({id: 3, hidden: false});
                    break;

                case 9: 
                    nodes.update({id: 1, hidden: false});
                    nodes.update({id: 3, hidden: false});
                    break;

                case 10: 
                    nodes.update({id: 1, hidden: false});
                    nodes.update({id: 4, hidden: false});
                    break;
                
                case 11: 
                    nodes.update({id: 1, hidden: false});
                    nodes.update({id: 4, hidden: false});
                    break;

                case 12: 
                    nodes.update({id: 3, hidden: false});
                    nodes.update({id: 2, hidden: false});
                    break;
            
                case 13: 
                    nodes.update({id: 3, hidden: false});
                    nodes.update({id: 2, hidden: false});
                    break;

                case 14: 
                    nodes.update({id: 3, hidden: false});
                    nodes.update({id: 2, hidden: false});
                    break;

                case 15: 
                    nodes.update({id: 2, hidden: false});
                    nodes.update({id: 4, hidden: false});
                    break;

                case 16: 
                    nodes.update({id: 2, hidden: false});
                    nodes.update({id: 4, hidden: false});
                    break;

                case 17: 
                    nodes.update({id: 4, hidden: false});
                    nodes.update({id: 5, hidden: false});
                    break;

                case 18: 
                    nodes.update({id: 4, hidden: false});
                    nodes.update({id: 5, hidden: false});
                    break;

                case 19: 
                    nodes.update({id: 2, hidden: false});
                    nodes.update({id: 7, hidden: false});
                    break;

                case 20: 
                    nodes.update({id: 5, hidden: false});
                    nodes.update({id: 7, hidden: false});
                    break;

                case 21: 
                    nodes.update({id: 5, hidden: false});
                    nodes.update({id: 7, hidden: false});
                    break;

                case 22: 
                    nodes.update({id: 5, hidden: false});
                    nodes.update({id: 7, hidden: false});
                    break;
                    
                case 23: 
                    nodes.update({id: 6, hidden: false});
                    nodes.update({id: 7, hidden: false});
                    break;
            }
            
        }

        var moving = false;

        network.on("hoverNode",function (params){
            network.canvas.body.container.style.cursor = 'pointer'
            hideNodes()
                showStuff(this.getNodeAt(params.pointer.DOM));
        });

        // network.on("click", function (params) {
        //     const node = this.getNodeAt(params.pointer.DOM)

        //     // if(node < 8){
        //     //     if(!moving){
        //     //         console.log(node)
        //     //         console.log("Moving is true")
        //     //         moving = true;
        //     //         var options = {
        //     //             scale: 1,
        //     //             offset: {x:0, y:0},
        //     //             animation: { 
        //     //             duration: 1000,
        //     //             easingFunction: "linear"
        //     //             }
        //     //         };
        //     //         hideNodes()
        //     //         // network.focus(node,options)
        //     //         network.fit(options)
        //     //         showStuff(node)

        //     //         setTimeout(function(){
        //     //             console.log(node)
        //     //             moving = false; 
        //     //             console.log("Moving is false")
        //     //         },1000);
        //     //     }
        //     // }
        //     if(node >=8){
        //         if(!moving){
        //             console.log(node)
        //             console.log("Moving is true")
        //             moving = true;
        //             var options = {
        //                 scale: 1,
        //                 offset: {x:0, y:0},
        //                 animation: { 
        //                 duration: 1000,
        //                 easingFunction: "linear"
        //                 }
        //             };
        //             hideNodes()
        //             showStuff(this.getNodeAt(params.pointer.DOM));
        //             //network.focus(this.getNodeAt(params.pointer.DOM),options)
        //             // network.fit(options)
        //             setTimeout(function(){
        //                 console.log(node)
        //                 moving = false; 
        //                 console.log("Moving is false")
        //             },1000);
        //         }
        //     }  
        // });

        network.on("blurNode", function (params) {
            network.canvas.body.container.style.cursor = 'default'
            hideNodes()
        });


        function updater(){
            project.clear()
            var nodeID = [8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23];
            // var nodePosition = network.canvasToDOM(network.getPositions([nodeId])[nodeId]);
            // console.log(nodePosition)

            ballPositions = [];
            for(const item in nodeID){
                const node = network.getPositions([nodeID[item]])[nodeID[item]]
                const corner = network.canvasToDOM({
                    x: node.x,
                    y: node.y
                })

                var arr = []
                arr.push(corner.x)
                arr.push(corner.y)
                ballPositions.push(arr)
            }
            
            var circlePaths = [];
            var radius = 50;
            for (var i = 0, l = ballPositions.length; i < l; i++) {
                var circlePath = new Path.Circle({
                    center: ballPositions[i],
                    radius: 75
                });
                circlePaths.push(circlePath);
            }

            var connections = new Group();
            function generateConnections(paths) {
                // Remove the last connection paths:
                //connections.children = [];

                for (var i = 0, l = paths.length; i < l; i++) {
                    for (var j = i - 1; j >= 0; j--) {
                        var path = metaball(paths[i], paths[j], 0.5, handle_len_rate, 300);
                        if (path){
                            connections.appendTop(path);
                            path.removeOnMove();
                        }
                    }
                }
            }
            generateConnections(circlePaths);
        
        }

        function onMouseMove(event) {
            updater()
        }

            // console.log(ballPositions)

        network.on("afterDrawing",function(params){
            updater()
        })
    </script>
   
</body>
</html>